<!-- Encabezado y filtros -->
<div class="encabezado-paseos">
  <h2>Mis Paseos</h2>

  <div class="filtros-superiores">
    <mat-form-field appearance="fill" style="width: 200px;">
      <mat-label>Filtrar por estado</mat-label>
      <mat-select [(value)]="estadoSeleccionado" (selectionChange)="ngOnInit()">
        <mat-option value="">
          <mat-icon style="color:#607d8b; margin-right:6px;">list</mat-icon>
          Todos
        </mat-option>
        <mat-option *ngFor="let estado of estados" [value]="estado">
          <mat-icon [ngStyle]="{ 'margin-right.px': 6, 'color': getColorEstado(estado) }">
            {{ getIconoEstado(estado) }}
          </mat-icon>
          {{ estado }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-mini-fab color="primary" matTooltip="Ver Calendario" (click)="vercalendario()">
      <mat-icon>calendar_today</mat-icon>
    </button>
  </div>
</div>

<!-- 游댳 Controles arriba -->
<div class="controles-carrusel">
  <button mat-icon-button color="primary" matTooltipPosition="above" matTooltip="Primera p치gina" (click)="irPrimeraPagina()"
    [disabled]="page === 1">
    <mat-icon>first_page</mat-icon>
  </button>

  <button mat-icon-button color="primary" matTooltipPosition="above" matTooltip="P치gina anterior" (click)="anteriorCard()" [disabled]="page === 1">
    <mat-icon>chevron_left</mat-icon>
  </button>

  <button mat-icon-button color="primary" matTooltipPosition="above" matTooltip="P치gina siguiente" (click)="siguienteCard()"
    [disabled]="page === totalPages">
    <mat-icon>chevron_right</mat-icon>
  </button>

  <button mat-icon-button color="primary" matTooltipPosition="above" matTooltip="칔ltima p치gina" (click)="irUltimaPagina()"
    [disabled]="page === totalPages">
    <mat-icon>last_page</mat-icon>
  </button>
</div>

<!-- 游댳 Carrusel -->
<div class="paseos-carrusel">
  <div class="paseos-grid">
    <mat-card *ngFor="let paseo of paseos" class="paseo-card">
      <mat-card-header>
        <mat-card-title>{{ paseo.nombreTarifa }}</mat-card-title>
        <mat-card-subtitle>
          <mat-icon style="color:#4caf50; margin-right:5px;">person</mat-icon>
          {{ paseo.nombrePasador }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p><strong>Fecha:</strong> {{ paseo.fecha | date:'fullDate' }}</p>
        <p><strong>Turno:</strong> {{ paseo.turno | titlecase }}</p>
        <p><strong>Costo:</strong> {{ paseo.costoTotal | number:'1.0-0':'es' }}</p>
        <div style="display: flex; align-items: center; gap: 8px;">
          <strong>Estado:</strong>
          <button mat-raised-button [ngStyle]="{ 'background-color': getColorEstado(paseo.estado), 'color': '#fff' }"
            disabled>
            {{ paseo.estado }}
          </button>
        </div>

        <!-- Lista de perros -->
        <div *ngIf="paseo.perros?.length" class="perros-lista-scroll">
          <div *ngFor="let perro of paseo.perros" class="perro-item">
            <img *ngIf="perro.imagenUrl?.length" [src]="perro.imagenUrl[0]" alt="{{ perro.nombre }}" class="perro-img"
              (click)="verImagen(perro)">
            <span>{{ perro.nombre }}</span>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-mini-fab class="agregar" matTooltip="Perro Recibido"
          [disabled]="paseo.estado == 'Cancelado' || paseo.estado == 'Entregado' || paseo.estado == 'Finalizado'|| paseo.estado == 'Pagado'"
          (click)="paseoRecibido(paseo)">
          <mat-icon>check</mat-icon>
        </button>

        <button mat-mini-fab class="ver"
          [disabled]="paseo.estado == 'Cancelado'|| paseo.estado == 'EnCurso' || paseo.estado == 'Entregado'|| paseo.estado == 'Finalizado'|| paseo.estado == 'Pagado'"
          matTooltip="Editar Paseo" (click)="editarPaseo(paseo)">
          <mat-icon>edit</mat-icon>
        </button>
  
        <button mat-mini-fab color="warn"
          [disabled]="paseo.estado == 'Cancelado'|| paseo.estado == 'EnCurso' || paseo.estado == 'Entregado'|| paseo.estado == 'Finalizado'|| paseo.estado == 'Pagado'"
          matTooltip="Cancelar Paseo" (click)="eliminarPaseo(paseo)">
          <mat-icon>cancel</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
<br>
<footer class="footer">
  <p>Copyright &copy; 2025 - Hecho con orgullo en Colombia. Todos los derechos reservados.</p>
</footer>
